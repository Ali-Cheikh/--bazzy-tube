<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form | LUDO REAL LIFE</title>
    <link rel="shortcut icon" href="assets/images/Ali.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="assets/images/Ali.png">
    <meta name="author" content="Ali Cheikh">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="theme-color" content="#f8840f">
    
    <meta name="title" content="LUDO REAL LIFE" />
    <meta name="description"  content="16 Player Ludo is a strategy board game for two to four players| in which the real life one with 4 teams racing to the center from start to finish according to the rolls of a single die. Fun /Competitive /Betrayal /Challenge /Surprises /Action /Drama" />
    <meta property="og:site_name" content="Join us in this event">
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://LUDO_REAL _LIFE.tn" />
    <meta property="og:title" content="LUDO REAL LIFE" />
    <meta property="og:description" content="16 Player Ludo is a strategy board game for two to four players| in which the real life one with 4 teams racing to the center from start to finish according to the rolls of a single die. Fun /Competitive /Betrayal /Challenge /Surprises /Action /Drama" />
    <meta property="og:image" content="https://bazzy.onrender.com/assets/images/blog-1.png" />

    <meta property="twitter:card" content="https://bazzy.onrender.com/assets/images/blog-1.png" />
    <meta property="twitter:url" content="https://LUDO_REAL _LIFE.tn" />
    <meta property="twitter:title" content="LUDO REAL LIFE" />
    <meta property="twitter:description" content="16 Player Ludo is a strategy board game for two to four players| in which the real life one with 4 teams racing to the center from start to finish according to the rolls of a single die. Fun /Competitive /Betrayal /Challenge /Surprises /Action /Drama" />
    <meta property="twitter:image" content="https://bazzy.onrender.com/assets/images/blog-1.png" />

    <link rel="stylesheet" href="assets/css/stylee.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.0/build/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .text{
            text-transform: uppercase;
            background-image: linear-gradient(to right, #f20000, #f79d00, #125aa7, #64f38c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;

            background-size: 300%;
            background-position: -100%;

            animation: animatedText 5s infinite alternate-reverse;
            }

            @keyframes animatedText{
                to{
                    background-position: 100%;
                }
            }
    </style>
</head>

<body>
    <img id="phonee" src="images/namelogoludo.png" alt="Event Title">
    <div id="timer" class="boddy">
        <div class="diiv" id="days"></div>
        <div class="diiv" id="hours"></div>
        <div class="diiv" id="minutes"></div>
        <div class="diiv" id="seconds"></div>
    </div><br>
    <div class="background">
        <div class="screen">
            <a href="index.html" target="Back To Main">
                <div class="screen-header">
                    <div class="screen-header-left">
                        <div class="screen-header-button close"></div>
                        <div class="screen-header-button maximize"></div>
                        <div class="screen-header-button minimize"></div>
                    </div>
                    <div class="screen-header-right">
                        <div class="screen-header-ellipsis"></div>
                        <div class="screen-header-ellipsis"></div>
                        <div class="screen-header-ellipsis"></div>
                    </div>
                </div>
            </a>
            <div class="screen-body">
                <div class="screen-body-item left">
                    <h2 class="app-title text">Registration</h2>
                    <form id="registration-form" >
                        <div class="app-form-group">
                            <input type="text" class="app-form-control"  name="name" placeholder="Full Name"  id="name" required pattern="[a-zA-Z\s]{2,50}" title="Please enter your full name (2-50 characters)">
                        </div>
                        <div class="app-form-group">
                            <input type="number" class="app-form-control"  name="age" placeholder="Age (16-20 or 20+)" id="age" required pattern="^(16|17|18|19|20|[2-9][0-9]+)$">
                        </div>
                        <div class="app-form-group">
                            <input type="tel" class="app-form-control"  name="phone" placeholder="Phone Number" id="phone" required>
                        </div>
                        <div class="app-form-group">
                            <select  class="app-form-control" id="payment-method" name="payment_method" required>
                                <option value="on sight"  selected>Pay the day of the event</option>
                            </select>
                        </div>
                        <div class="app-form-group">
                            <h2 class="text">Price 13DT</h2>
                        </div>
                        <div class="app-form-buttons">
                            <button type="submit" class="app-form-button" >Register</button>
                        </div>
                    </form>
                </div>
                <div class="screen-body-item">
                    <div id="ticket-container" class="hidden">
                        <div id="ticket">
                            <div id="qr-code"></div>
                            <div id="ticket-info">
                                <h1 style="color:white;" class="text-lg">Holder</h1>
                                <div id="ticket-name"></div>
                            </div>
                        </div><br>
                        <button class="btn-primary bg-yellow-400 text-black-10 text-lg p-2 rounded" onclick="downloadTicket()">Download Ticket</button><br><br>
                        <hr>
                        <h4 class="text">Make sure to have the ticket on your phone the day of the event</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
document.getElementById('age').addEventListener('blur', function () {
    var age = parseInt(this.value);
    if (!isNaN(age) && age < 16) {
        Swal.fire({
            imageUrl: "assets/images/logo.png",
            imageAlt: "Custom Warning Icon",
            title: 'Requires Parent Permission!',
            text: `You are under 16 years old. Are you sure you want to proceed?`,
            width: 600,
            padding: "3em",
            showCancelButton: true,
            confirmButtonText: 'Yes, Proceed',
            cancelButtonText: 'No, Cancel',
            allowOutsideClick: false,
            color: "white",
            background: "#262626",
            backdrop: "rgba(0,0,0,0.4)",
        })
            .then((result) => {
                if (result.isConfirmed) {
                    // Allow the form to be submitted
                } else {
                    // Reload the page
                    location.reload();
                }
            });
    }
});

// Remove duplicate code in fetch error handling
document.getElementById('registration-form').addEventListener('submit', function (e) {
    e.preventDefault();

    const name = document.getElementById('name').value;
    const age = document.getElementById('age').value;
    const phone = document.getElementById('phone').value;
    const paymentMethod = document.getElementById('payment-method').value;

    Swal.fire({
        icon: 'info',
        title: 'Please wait...',
        text: 'Sending your message',
        willOpen: () => {
            Swal.showLoading();
        },
        showConfirmButton: false,
        allowOutsideClick: false,
        background: "hsla(231, 10%, 14%, 1)"
    });

    const formData = new FormData(this);

    fetch('https://script.google.com/macros/s/AKfycbxN9zEA2zvabVwnJevyaBPvddZa0NJt0Zvbhh7Ty7QWgYY_OtRBITeWSpNv0YS1REk/exec', {
        method: 'POST',
        body: formData
    })
        .then(response => response.json())
        .then(data => {
            if (data.result === 'success') {
                Swal.fire({
                    imageUrl: "assets/images/logo.png",
                    imageAlt: "Custom Success Icon",
                    title: 'Success!',
                    html: `Your Registration is complete download the code <button class="bg-yellow-400 text-black-10 text-lg p-2 rounded" onclick="downloadTicket()">Download Ticket</button> your Ticket `,
                    width: 600,
                    padding: "3em",
                    timer: 5000,
                    timerProgressBar: true,
                    showConfirmButton: false,
                    allowOutsideClick: false,
                    color: "white",
                    background: "#262626",
                    backdrop: "rgba(0,0,0,0.4)",
                });

                generateTicket(name, age, phone);
            } else {
                Swal.fire({
                    imageUrl: "assets/images/logo.png",
                    imageAlt: "Custom Success Icon",
                    title: 'Success!',
                    html: `Your Registration is complete download the code <button class="bg-yellow-400 text-black-10 text-lg p-2 rounded" onclick="downloadTicket()">Download Ticket</button> your Ticket `,
                    width: 600,
                    padding: "3em",
                    timer: 5000,
                    timerProgressBar: true,
                    showConfirmButton: false,
                    allowOutsideClick: false,
                    color: "white",
                    background: "#262626",
                    backdrop: "rgba(0,0,0,0.4)",
                });
                generateTicket(name, age, phone);
            }
        })
        .catch(error => {
            console.error('Error!', error);
            Swal.fire({
                imageUrl: "assets/images/logo.png",
                imageAlt: "Custom Success Icon",
                title: 'Success!',
                html: `Your Registration is complete download the code <button class="bg-yellow-400 text-black-10 text-lg p-2 rounded" onclick="downloadTicket()">Download Ticket</button> your Ticket `,
                width: 600,
                padding: "3em",
                timer: 5000,
                timerProgressBar: true,
                showConfirmButton: false,
                allowOutsideClick: false,
                color: "white",
                background: "#262626",
                backdrop: "rgba(0,0,0,0.4)",
            });
            generateTicket(name, age, phone);
        });
});

function generateTicket(name, age, phone) {
    const qrCodeContainer = document.getElementById('qr-code');
    const ticketName = document.getElementById('ticket-name');
    const ticketContainer = document.getElementById('ticket-container');

    // Create a canvas element for the QR code
    const canvas = document.createElement('canvas');
    qrCodeContainer.innerHTML = ''; // Clear previous content
    qrCodeContainer.appendChild(canvas); // Append canvas to qr-code container

    // Generate QR code
    QRCode.toCanvas(canvas, `Name: ${name}, Phone: ${phone}, Age: ${age}`, { width: 200 }, function (error) {
        if (error) {
            console.error('QR Code Generation Error:', error);
            return;
        }
        console.log('QR code generated successfully!');
    });

    // Display ticket name
    ticketName.innerHTML = `<span class='spaan' class="text-green-200 text-lg font-bold"><br>${name}</span>`;

    // Show ticket container
    ticketContainer.classList.remove('hidden');
}

function downloadTicket() {
    html2canvas(document.getElementById('ticket')).then(function (canvas) {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'ticket.png';
        link.click();
    });
}
    </script>
    <script>

function makeTimer() {

var endTime = new Date("September 08, 2024 15:30:00 GMT");
var endTime = (Date.parse(endTime)) / 1000;

var now = new Date();
var now = (Date.parse(now) / 1000);

var timeLeft = endTime - now;

var days = Math.floor(timeLeft / 86400); 
var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600 )) / 60);
var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

if (hours < "10") { hours = "0" + hours; }
if (minutes < "10") { minutes = "0" + minutes; }
if (seconds < "10") { seconds = "0" + seconds; }

$("#days").html(days + "<span class='spaan' >Days</span>");
$("#hours").html(hours + "<span class='spaan'>Hours</span>");
$("#minutes").html(minutes + "<span class='spaan'>Minutes</span>");
$("#seconds").html(seconds + "<span class='spaan'>Seconds</span>");   

}

setInterval(function() { makeTimer(); }, 1000);
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
</body>

</html>